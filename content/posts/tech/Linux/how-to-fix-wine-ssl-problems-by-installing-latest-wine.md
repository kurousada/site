+++

title       = ""
type        = "post"
author      = "Kuro Usada"
categories  = ["Linux", "tech"]
date        = "2017-10-20T11:33:16+09:00"
description = ""
draft       = true
toc         = true

featured              = ""
featuredpath          = "date"
featuredlocation      = ""
featuredtitle         = ""
featuredcopyright     = ""
featuredcopyrightlink = ""

+++

<!--more-->

##

wine-1.6はSSL未サポート→証明書をverifyできず、「unauthorized certification error」になる（わかりにくい）
wineの最新版を入れるにはhttps://wiki.winehq.org/Ubuntu
なお、旧来のlounchpadのPPAは2017/03/28にdeprecated→https://launchpad.net/~wine/+archive/ubuntu/wine-builds
経緯→https://www.winehq.org/pipermail/wine-devel/2017-March/117104.html

インストールする時は wine-mono, wine-gecko, winetricksなどをapt removeしてから（古いwineは自動で消してくれるようだ）

```
$ sudo apt remove wine wine-mono wine-gecko winetricks
```

64bit環境ならi386を追加

```
$ sudo dpkg --add-architecture i386
```

https://wiki.winehq.org/Ubuntuのとおり

```
$ sudo apt install --install-recommends winehq-stable
パッケージリストを読み込んでいます... 完了
依存関係ツリーを作成しています                
状態情報を読み取っています... 完了
以下のパッケージが自動でインストールされましたが、もう必要とされていません:
  ocl-icd-libopencl1:i386
これを削除するには 'sudo apt autoremove' を利用してください。
以下の追加パッケージがインストールされます:
  libcapi20-3 libgsm1:i386 libodbc1 libosmesa6 libosmesa6:i386 libpcap0.8:i386 wine-stable wine-stable-amd64 wine-stable-i386:i386
提案パッケージ:
  isdnutils-doc libmyodbc odbc-postgresql tdsodbc unixodbc-bin
以下のパッケージは「削除」されます:
  wine1.6 wine1.6-amd64 wine1.6-i386:i386
以下のパッケージが新たにインストールされます:
  libcapi20-3 libgsm1:i386 libodbc1 libosmesa6 libosmesa6:i386 libpcap0.8:i386 wine-stable wine-stable-amd64 wine-stable-i386:i386 winehq-stable
アップグレード: 0 個、新規インストール: 10 個、削除: 3 個、保留: 0 個。
50.4 MB のアーカイブを取得する必要があります。
この操作後に追加で 136 MB のディスク容量が消費されます。
続行しますか? [Y/n] 
取得:1 http://ftp.jaist.ac.jp/pub/Linux/ubuntu xenial/universe i386 libgsm1 i386 1.0.13-4 [27.0 kB]
取得:2 http://ftp.jaist.ac.jp/pub/Linux/ubuntu xenial/main i386 libpcap0.8 i386 1.7.4-2 [121 kB]
取得:3 http://ftp.jaist.ac.jp/pub/Linux/ubuntu xenial/universe amd64 libcapi20-3 amd64 1:3.27-1 [28.7 kB]
取得:4 http://ftp.jaist.ac.jp/pub/Linux/ubuntu xenial/main amd64 libodbc1 amd64 2.3.1-4.1 [180 kB]
取得:5 http://ftp.jaist.ac.jp/pub/Linux/ubuntu xenial-updates/main amd64 libosmesa6 amd64 17.0.7-0ubuntu0.16.04.2 [1,190 kB]
取得:6 https://dl.winehq.org/wine-builds/ubuntu xenial/main amd64 wine-stable-amd64 amd64 2.0.3~xenial [23.8 MB]
取得:7 http://ftp.jaist.ac.jp/pub/Linux/ubuntu xenial-updates/main i386 libosmesa6 i386 17.0.7-0ubuntu0.16.04.2 [1,259 kB]
取得:8 https://dl.winehq.org/wine-builds/ubuntu xenial/main i386 wine-stable-i386 i386 2.0.3~xenial [22.7 MB]                                                                      
取得:9 https://dl.winehq.org/wine-builds/ubuntu xenial/main amd64 wine-stable amd64 2.0.3~xenial [1,084 kB]                                                                        
取得:10 https://dl.winehq.org/wine-builds/ubuntu xenial/main amd64 winehq-stable amd64 2.0.3~xenial [3,178 B]                                                                      
50.4 MB を 22秒 で取得しました (2,266 kB/s)                                                                                                                                        
N: ディレクトリ '/etc/apt/sources.list.d/' の 'libsdl2-2.0.5.list.old' が無効なファイル名拡張子を持っているため、無視します
(データベースを読み込んでいます ... 現在 438515 個のファイルとディレクトリがインストールされています。)
wine1.6 (1:1.6.2-0ubuntu14.2) を削除しています ...
wine1.6-amd64 (1:1.6.2-0ubuntu14.2) を削除しています ...
wine1.6-i386:i386 (1:1.6.2-0ubuntu14.2) を削除しています ...
man-db (2.7.5-1) のトリガを処理しています ...
mime-support (3.59ubuntu1) のトリガを処理しています ...
hicolor-icon-theme (0.15-0ubuntu1) のトリガを処理しています ...
desktop-file-utils (0.22+linuxmint1) のトリガを処理しています ...
gnome-menus (3.13.3-6ubuntu3.1) のトリガを処理しています ...
bamfdaemon (0.5.3~bzr0+16.04.20160824-0ubuntu1) のトリガを処理しています ...
Rebuilding /usr/share/applications/bamf-2.index...
libc-bin (2.23-0ubuntu9) のトリガを処理しています ...
以前に未選択のパッケージ libgsm1:i386 を選択しています。
(データベースを読み込んでいます ... 現在 435990 個のファイルとディレクトリがインストールされています。)
.../libgsm1_1.0.13-4_i386.deb を展開する準備をしています ...
libgsm1:i386 (1.0.13-4) を展開しています...
以前に未選択のパッケージ wine-stable-amd64 を選択しています。
.../wine-stable-amd64_2.0.3~xenial_amd64.deb を展開する準備をしています ...
wine-stable-amd64 (2.0.3~xenial) を展開しています...
以前に未選択のパッケージ libpcap0.8:i386 を選択しています。
.../libpcap0.8_1.7.4-2_i386.deb を展開する準備をしています ...
libpcap0.8:i386 (1.7.4-2) を展開しています...
以前に未選択のパッケージ wine-stable-i386:i386 を選択しています。
.../wine-stable-i386_2.0.3~xenial_i386.deb を展開する準備をしています ...
wine-stable-i386:i386 (2.0.3~xenial) を展開しています...
以前に未選択のパッケージ wine-stable を選択しています。
.../wine-stable_2.0.3~xenial_amd64.deb を展開する準備をしています ...
wine-stable (2.0.3~xenial) を展開しています...
以前に未選択のパッケージ libcapi20-3:amd64 を選択しています。
.../libcapi20-3_1%3a3.27-1_amd64.deb を展開する準備をしています ...
libcapi20-3:amd64 (1:3.27-1) を展開しています...
以前に未選択のパッケージ libodbc1:amd64 を選択しています。
.../libodbc1_2.3.1-4.1_amd64.deb を展開する準備をしています ...
libodbc1:amd64 (2.3.1-4.1) を展開しています...
以前に未選択のパッケージ winehq-stable を選択しています。
.../winehq-stable_2.0.3~xenial_amd64.deb を展開する準備をしています ...
winehq-stable (2.0.3~xenial) を展開しています...
以前に未選択のパッケージ libosmesa6:amd64 を選択しています。
.../libosmesa6_17.0.7-0ubuntu0.16.04.2_amd64.deb を展開する準備をしています ...
libosmesa6:amd64 (17.0.7-0ubuntu0.16.04.2) を展開しています...
以前に未選択のパッケージ libosmesa6:i386 を選択しています。
.../libosmesa6_17.0.7-0ubuntu0.16.04.2_i386.deb を展開する準備をしています ...
libosmesa6:i386 (17.0.7-0ubuntu0.16.04.2) を展開しています...
libc-bin (2.23-0ubuntu9) のトリガを処理しています ...
man-db (2.7.5-1) のトリガを処理しています ...
desktop-file-utils (0.22+linuxmint1) のトリガを処理しています ...
gnome-menus (3.13.3-6ubuntu3.1) のトリガを処理しています ...
bamfdaemon (0.5.3~bzr0+16.04.20160824-0ubuntu1) のトリガを処理しています ...
Rebuilding /usr/share/applications/bamf-2.index...
mime-support (3.59ubuntu1) のトリガを処理しています ...
libgsm1:i386 (1.0.13-4) を設定しています ...
wine-stable-amd64 (2.0.3~xenial) を設定しています ...
libpcap0.8:i386 (1.7.4-2) を設定しています ...
wine-stable-i386:i386 (2.0.3~xenial) を設定しています ...
wine-stable (2.0.3~xenial) を設定しています ...
libcapi20-3:amd64 (1:3.27-1) を設定しています ...
libodbc1:amd64 (2.3.1-4.1) を設定しています ...
winehq-stable (2.0.3~xenial) を設定しています ...
libosmesa6:amd64 (17.0.7-0ubuntu0.16.04.2) を設定しています ...
libosmesa6:i386 (17.0.7-0ubuntu0.16.04.2) を設定しています ...
libc-bin (2.23-0ubuntu9) のトリガを処理しています ...
```

```
$ sudo apt install winetricks
$ winetricks
```

で、wine-monoとwine-geckoをインストールするか聞かれるので、「インストール」を選択（代わりにシステムのパッケージ使えるとか出てくるけど、WineHQのwikiに従ってやめておく）

最後にwgetしたRelease.keyを消して終了

```
$ rm Release.key
```
